function URLParser(){"use strict";this.plugins={}}function getTime(a){"use strict";var b,c=0,d={s:1,m:60,h:3600,d:86400,w:604800};if(!a.match(/^(\d+[smhdw]?)+$/))return 0;a=a.replace(/([smhdw])/g," $1 ").trim(),b=a.split(" ");for(var e=0;e<b.length;e+=2)c+=parseInt(b[e],10)*d[b[e+1]||"s"];return c}URLParser.prototype.parse=function(a){"use strict";var b,c=this,d=a.match(/(?:https?:\/\/)?(?:[^\.]+\.)?(\w+)\./i),e=d?d[1]:void 0;return d&&e&&c.plugins[e]&&(b=c.plugins[e].parse.call(this,a))?(b.provider=c.plugins[e].provider,b):void 0},URLParser.prototype.bind=function(a){var b=this;if(b.plugins[a.provider]=a,a.alternatives){var c;for(c=0;c<a.alternatives.length;c+=1)b.plugins[a.alternatives[c]]=a}},URLParser.prototype.create=function(a){var b=this,c=a.videoInfo;return a.format=a.format||"short",b.plugins[c.provider].create?b.plugins[c.provider].create.call(this,a):void 0};var urlParser=new URLParser;"function"!=typeof String.prototype.format&&(String.prototype.format=function(){var a,b,c=this;for(a=0;a<arguments.length;a+=1)b=new RegExp("\\{"+a+"\\}","gm"),c=c.replace(b,arguments[a]);return c}),urlParser.bind({provider:"dailymotion",alternatives:["dai"],parse:function(a){"use strict";var b,c,d,e={};return b=a.match(/(?:\/video|ly)\/([A-Za-z0-9]+)/i),c=b?b[1]:void 0,b=a.match(/[#\?&]start=([A-Za-z0-9]+)/i),d=b?getTime(b[1]):void 0,c?(e.mediaType="video",e.id=c,d&&(e.startTime=d),e):void 0},create:function(a){"use strict";var b=a.videoInfo;return b.startTime?"https://www.dailymotion.com/video/{0}?start={1}".format(b.id,b.startTime):"short"===a.format?"https://dai.ly/{0}".format(b.id):"https://www.dailymotion.com/video/{0}".format(b.id)}}),urlParser.bind({provider:"twitch",parse:function(a){"use strict";var b,c,d,e,f={};return b=a.match(/twitch\.tv\/(\w+)(?:\/(.)\/(\d+))?/i),d=b?b[1]:void 0,e=b?b[2]:void 0,c=b?b[3]:void 0,b=a.match(/(?:\?channel|\&utm_content)=(\w+)/i),(d=b?b[1]:d)?(c?(f.mediaType="video",f.id=c,f.idPrefix=e):f.mediaType="stream",f.channel=d,f):void 0},create:function(a){"use strict";var b=a.videoInfo;return"stream"===b.mediaType?"https://twitch.tv/{0}".format(b.channel):"https://twitch.tv/{0}/{1}/{2}".format(b.channel,b.idPrefix,b.id)}}),urlParser.bind({provider:"vimeo",alternatives:["vimeopro"],parse:function(a){"use strict";var b,c;return b=a.match(/(?:\/(?:channels\/[\w]+|(?:album\/\d+\/)?videos?))?\/(\d+)/i),c=b?b[1]:void 0,c?{mediaType:"video",id:c}:void 0},create:function(a){"use strict";return"https://vimeo.com/{0}".format(a.videoInfo.id)}}),urlParser.bind({provider:"youtube",alternatives:["youtu"],parse:function(a){"use strict";var b,c,d,e,f,g={};if(b=a.match(/(?:(?:v|be|videos)\/|v=)([\w\-]{11})/i),c=b?b[1]:void 0,b=a.match(/list=([\w\-]+)/i),d=b?b[1]:void 0,b=a.match(/index=(\d+)/i),e=b?Number(b[1]):void 0,b=a.match(/[#\?&](?:star)?t=([A-Za-z0-9]+)/i),f=b?getTime(b[1]):void 0,c)g.mediaType="video",g.id=c,d&&(g.playlistId=d,e&&(g.playlistIndex=e)),f&&(g.startTime=f);else{if(!d)return void 0;g.mediaType="playlist",g.playlistId=d}return g},create:function(a){"use strict";var b,c=a.videoInfo;return"playlist"===c.mediaType?"https://www.youtube.com/playlist?feature=share&list={0}".format(c.playlistId):(c.playlistId?(b="https://www.youtube.com/watch?v={0}&list={1}".format(c.id,c.playlistId),c.playlistIndex&&(b+="&index={0}".format(c.playlistIndex))):b="short"===a.format?"https://youtu.be/{0}".format(c.id):"https://www.youtube.com/watch?v={0}".format(c.id),c.startTime&&(b+="#t={0}".format(c.startTime)),b)}});