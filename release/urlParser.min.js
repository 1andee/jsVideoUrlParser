function URLParser(){this.plugins={}}URLParser.prototype.parse=function(a){var b=a.match(/(?:https?:\/\/)?(?:[^\.]+\.)?(\w+)\./i),d=b?b[1]:void 0;if(b&&d&&this.plugins[d]&&(a=this.plugins[d].parse.call(this,a)))return a.provider=this.plugins[d].provider,a};URLParser.prototype.bind=function(a){this.plugins[a.provider]=a;if(a.alternatives){var b;for(b=0;b<a.alternatives.length;b+=1)this.plugins[a.alternatives[b]]=a}};
URLParser.prototype.create=function(a){var b=a.videoInfo;a.format=a.format||"short";if(this.plugins[b.provider].create)return this.plugins[b.provider].create.call(this,a)};window.urlParser=new URLParser;function getTime(a){var b=0,d={s:1,m:60,h:3600,d:86400,w:604800};if(!a.match(/^(\d+[smhdw]?)+$/))return 0;a=a.replace(/([smhdw])/g," $1 ").trim();a=a.split(" ");for(var c=0;c<a.length;c+=2)console.log(a[c]),console.log(a[c+1]),b+=parseInt(a[c],10)*d[a[c+1]||"s"];return b}
"function"!==typeof String.prototype.format&&(String.prototype.format=function(){var a=this,b,d;for(b=0;b<arguments.length;b+=1)d=new RegExp("\\{"+b+"\\}","gm"),a=a.replace(d,arguments[b]);return a});
urlParser.bind({provider:"dailymotion",alternatives:["dai"],parse:function(a){var b,d,c={};d=(b=a.match(/(?:\/video|ly)\/([A-Za-z0-9]+)/i))?b[1]:void 0;a=(b=a.match(/[#\?&]start=([A-Za-z0-9]+)/i))?getTime(b[1]):void 0;if(d)return c.mediaType="video",c.videoId=d,a&&(c.startTime=a),c},create:function(a){var b=a.videoInfo;return b.startTime?"https://www.dailymotion.com/video/{0}?start={1}".format(b.videoId,b.startTime):"short"===a.format?"https://dai.ly/{0}".format(b.videoId):"https://www.dailymotion.com/video/{0}".format(b.videoId)}});
urlParser.bind({provider:"livestream",parse:function(a){return(a=(a=a.match(/livestream\.com\/(\w+)/i))?a[1]:void 0)?{mediaType:"stream",channel:a}:void 0}});
urlParser.bind({provider:"twitch",parse:function(a){var b,d,c,f,e={};c=(b=a.match(/twitch\.tv\/(\w+)(?:\/(.)\/(\d+))?/i))?b[1]:void 0;f=b?b[2]:void 0;d=b?b[3]:void 0;if(c=(b=a.match(/(?:\?channel|\&utm_content)=(\w+)/i))?b[1]:c)return d?(e.mediaType="video",e.videoId=d,e.videoIdPrefix=f):e.mediaType="stream",e.channel=c,e},create:function(a){a=op.videoInfo;return"stream"===a.mediaType?"https://twitch.tv/{0}".format(a.channel):"https://twitch.tv/{0}/{1}/{2}".format(a.channel,a.videoIdPrefix,a.videoId)}});
urlParser.bind({provider:"vimeo",alternatives:["vimeopro"],parse:function(a){return(a=(a=a.match(/(?:\/(?:channels\/[\w]+|(?:album\/\d+\/)?videos?))?\/(\d+)/i))?a[1]:void 0)?{mediaType:"video",videoId:a}:void 0},create:function(a){return"https://vimeo.com/{0}".format(op.videoInfo.videoId)}});
urlParser.bind({provider:"youtube",alternatives:["youtu"],parse:function(a){var b,d,c,f,e={};d=(b=a.match(/(?:(?:v|be|videos)\/|v=)([\w\-]{11})/i))?b[1]:void 0;c=(b=a.match(/list=([\w\-]+)/i))?b[1]:void 0;f=(b=a.match(/index=(\d+)/i))?Number(b[1]):void 0;a=(b=a.match(/[#\?&](?:star)?t=([A-Za-z0-9]+)/i))?getTime(b[1]):void 0;if(d)e.mediaType="video",e.videoId=d,c&&(e.playlistId=c,f&&(e.playlistIndex=f)),a&&(e.startTime=a);else if(c)e.mediaType="playlist",e.playlistId=c;else return;return e},create:function(a){var b=
  a.videoInfo;if("playlist"===b.mediaType)return"https://www.youtube.com/playlist?feature=share&list={0}".format(b.playlistId);b.playlistId?(a="https://www.youtube.com/watch?v={0}&list={1}".format(b.videoId,b.playlistId),b.playlistIndex&&(a+="&index={0}".format(b.playlistIndex))):a="short"===a.format?"https://youtu.be/{0}".format(b.videoId):"https://www.youtube.com/watch?v={0}".format(b.videoId);b.startTime&&(a+="#t={0}".format(b.startTime));return a}});
