function URLParser(){this.plugins={}}URLParser.prototype.parse=function(a){var b=a.match(/(?:https?:\/\/)?(?:[^\.]+\.)?(\w+)\./i),c=b?b[1]:void 0;if(b&&c&&this.plugins[c]&&(a=this.plugins[c].parse.call(this,a)))return a.provider=this.plugins[c].provider,a};URLParser.prototype.bind=function(a){this.plugins[a.provider]=a;if(a.alternatives){var b;for(b=0;b<a.alternatives.length;b+=1)this.plugins[a.alternatives[b]]=a}};
URLParser.prototype.create=function(a){var b=a.videoInfo;a.format=a.format||"short";if(this.plugins[b.provider].create)return this.plugins[b.provider].create.call(this,a)};var urlParser=new URLParser;function getTime(a){var b=0,c={s:1,m:60,h:3600,d:86400,w:604800};if(!a.match(/^(\d+[smhdw]?)+$/))return 0;a=a.replace(/([smhdw])/g," $1 ").trim();a=a.split(" ");for(var d=0;d<a.length;d+=2)b+=parseInt(a[d],10)*c[a[d+1]||"s"];return b}
"function"!==typeof String.prototype.format&&(String.prototype.format=function(){var a=this,b,c;for(b=0;b<arguments.length;b+=1)c=new RegExp("\\{"+b+"\\}","gm"),a=a.replace(c,arguments[b]);return a});
urlParser.bind({provider:"dailymotion",alternatives:["dai"],parse:function(a){var b,c,d={};c=(b=a.match(/(?:\/video|ly)\/([A-Za-z0-9]+)/i))?b[1]:void 0;a=(b=a.match(/[#\?&]start=([A-Za-z0-9]+)/i))?getTime(b[1]):void 0;if(c)return d.mediaType="video",d.videoId=c,a&&(d.startTime=a),d},create:function(a){var b=a.videoInfo;return b.startTime?"https://www.dailymotion.com/video/{0}?start={1}".format(b.videoId,b.startTime):"short"===a.format?"https://dai.ly/{0}".format(b.videoId):"https://www.dailymotion.com/video/{0}".format(b.videoId)}});
urlParser.bind({provider:"livestream",parse:function(a){return(a=(a=a.match(/livestream\.com\/(\w+)/i))?a[1]:void 0)?{mediaType:"stream",channel:a}:void 0}});
urlParser.bind({provider:"twitch",parse:function(a){var b,c,d,f,e={};d=(b=a.match(/twitch\.tv\/(\w+)(?:\/(.)\/(\d+))?/i))?b[1]:void 0;f=b?b[2]:void 0;c=b?b[3]:void 0;if(d=(b=a.match(/(?:\?channel|\&utm_content)=(\w+)/i))?b[1]:d)return c?(e.mediaType="video",e.videoId=c,e.videoIdPrefix=f):e.mediaType="stream",e.channel=d,e},create:function(a){a=op.videoInfo;return"stream"===a.mediaType?"https://twitch.tv/{0}".format(a.channel):"https://twitch.tv/{0}/{1}/{2}".format(a.channel,a.videoIdPrefix,a.videoId)}});
urlParser.bind({provider:"vimeo",alternatives:["vimeopro"],parse:function(a){return(a=(a=a.match(/(?:\/(?:channels\/[\w]+|(?:album\/\d+\/)?videos?))?\/(\d+)/i))?a[1]:void 0)?{mediaType:"video",videoId:a}:void 0},create:function(a){return"https://vimeo.com/{0}".format(op.videoInfo.videoId)}});
urlParser.bind({provider:"youtube",alternatives:["youtu"],parse:function(a){var b,c,d,f,e={};c=(b=a.match(/(?:(?:v|be|videos)\/|v=)([\w\-]{11})/i))?b[1]:void 0;d=(b=a.match(/list=([\w\-]+)/i))?b[1]:void 0;f=(b=a.match(/index=(\d+)/i))?Number(b[1]):void 0;a=(b=a.match(/[#\?&](?:star)?t=([A-Za-z0-9]+)/i))?getTime(b[1]):void 0;if(c)e.mediaType="video",e.videoId=c,d&&(e.playlistId=d,f&&(e.playlistIndex=f)),a&&(e.startTime=a);else if(d)e.mediaType="playlist",e.playlistId=d;else return;return e},create:function(a){var b=
a.videoInfo;if("playlist"===b.mediaType)return"https://www.youtube.com/playlist?feature=share&list={0}".format(b.playlistId);b.playlistId?(a="https://www.youtube.com/watch?v={0}&list={1}".format(b.videoId,b.playlistId),b.playlistIndex&&(a+="&index={0}".format(b.playlistIndex))):a="short"===a.format?"https://youtu.be/{0}".format(b.videoId):"https://www.youtube.com/watch?v={0}".format(b.videoId);b.startTime&&(a+="#t={0}".format(b.startTime));return a}});
