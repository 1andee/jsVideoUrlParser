var urlParser=function(){var a={};return{parse:function(b){var c=b.match(/(https?:\/\/)?([^\.]+\.)?(\w+)\./i),d=c?c[3]:void 0;if(c&&d&&a[d]&&(b=a[d].parse.call(this,b)))return b.provider=a[d].provider,b},bind:function(b){a[b.provider]=b;if(b.alternatives){var c;for(c=0;c<b.alternatives.length;c+=1)a[b.alternatives[c]]=b}},create:function(b){if(a[b.provider].create)return a[b.provider].create.call(this,b)}}}();
String.format=function(a){var b=a,c,d;for(c=1;c<arguments.length;c+=1)d=new RegExp("\\{"+(c-1)+"\\}","gm"),b=b.replace(d,arguments[c]);return b};function getTime(a){var b=0,c=0,d,e={s:1,m:60,h:3600,d:86400,w:604800};if(!a.match(/^(\d+[smhdw]?)+$/))return 0;for(d=0;d<a.length;d+=1)"0"<=a[d]&&"9">=a[d]?c=10*c+parseInt(a[d],10):(a[d]in e&&(b+=e[a[d]]*c,delete e[a[d]]),c=0);0!==c&&"s"in e&&(b+=c,delete e.s);return b}
urlParser.bind({provider:"dailymotion",alternatives:["dai"],parse:function(a){return(a=(a=a.match(/((\/video)|(ly))\/([^_]+)/i))?a[4]:void 0)?{id:a}:void 0},create:function(a){return String.format("http://dai.ly/{0}",a.id)}});
urlParser.bind({provider:"twitch",parse:function(a){var b,c,d,e={};d=(b=a.match(/twitch\.tv\/(\w+)(\/.\/(\d+))?/i))?b[1]:void 0;c=b?b[3]:void 0;if(d=(b=a.match(/((\?channel)|(\&utm_content))=(\w+)/i))?b[1]:d)return c?(e.mediaType="video",e.id=c):e.mediaType="stream",e.channel=d,e},create:function(a){var b;"stream"===a.mediaType?b=String.format("http://twitch.tv/{0}",a.channel):"video"===a.mediaType&&(b=String.format("http://twitch.tv/{0}/c/{1}",a.channel,a.id));return b}});
urlParser.bind({provider:"vimeo",parse:function(a){return(a=(a=a.match(/(\/((channels\/[\w]+)|(album\/\d+)?\/video))?\/(\d+)/i))?a[5]:void 0)?{id:a}:void 0},create:function(a){return String.format("http://vimeo.com/{0}",a.id)}});
urlParser.bind({provider:"youtube",alternatives:["youtu"],parse:function(a){var b,c,d,e={};c=(b=a.match(/(((v|be|videos)\/)|(v=))([\w\-]{11})/i))?b[5]:void 0;d=(b=a.match(/list=([\w\-]+)/i))?b[1]:void 0;a=(b=a.match(/[#\?&](star)?t=([A-Za-z0-9]+)/i))?getTime(b[2]):void 0;if(c)e.mediaType="video",e.id=c,d&&(e.playlistId=d),a&&(e.startTime=a);else if(d)e.mediaType="playlist",e.playlistId=d;else return;return e},create:function(a){var b;"video"===a.mediaType?(b=a.playlistId?String.format("https://www.youtube.com/watch?v={0}&list={1}",
a.id,a.playlistId):String.format("http://youtu.be/{0}",a.id),a.startTime&&(b+=String.format("#t={0}",a.startTime))):"playlist"===a.mediaType&&(b=String.format("https://www.youtube.com/playlist?feature=share&list={0}",a.playlistId));return b}});